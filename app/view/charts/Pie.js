Ext.define('VulnerabilityScannerClient.view.charts.Pie', {
    extend: 'Ext.Container',
    xtype: 'pie',
    controller: 'pie',

    layout: 'fit',
    autoScroll: true,

    requires: [
        "Ext.chart.theme.DefaultGradients",
        "Ext.chart.series.Bar",
        "Ext.chart.axis.Category",
        "Ext.chart.axis.Numeric"
    ],

    items: [{
        title: 'Top vulnerabilities based on CVSS',
        xtype: 'cartesian',
        shadow: 'true',
        reference: 'chart',
        insetPadding: '20 10',
        theme: 'default-gradients',
        width: '100%',
        height: 600,
        store: {
            type: 'vulnerabilities'
        },
        axes : [{
           type: 'numeric',
           position: 'left',
           fields: 'cvss',
           grid: true,
           maximum: 10,
           title: 'CVSS' 
        }, {
            type: 'category3d',
            position: 'bottom',
            fields: 'id',
            title: 'Vulnerability',
            grid: true
        }],
        series: [{
            type: 'bar3d',
            xField: 'id',
            yField: 'cvss',
            tooltip: {
                trackMouse: true,
                showDelay: 0,
                dismissDelay: 0,
                hideDelay: 0,
                renderer: 'onSeriesTooltipRender'
            },
        }]
    }, {
        xtype: 'toolbar',
        docked: 'top',
        ui: 'transparent',
        padding: '5 8',
        layout: {
            type: 'hbox',
            align: 'stretch'
        },
        defaults: {
            shadow: 'true',
            ui: 'action'
        }
    }]
});