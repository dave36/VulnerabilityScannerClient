/**
 *  A basic pie chart is a circular chart divided into multiple sectors in proportion to
 *  the data they represent. They are widely used and are helpful in quickly identifying
 *  smallest and largest segments of the data.
 *
 *  The example makes use of two interactions: 'itemhighlight' (implicitly added to the
 *  chart by the 'highlight: true' config of the series) and 'rotate'.
 *
 *  To use the first one, hover over or tap on a pie sector.
 *  To use the second one, click or tap and then drag anywhere on the chart.
 */
Ext.define('VulnerabilityScannerClient.view.charts.Pie', {
    extend: 'Ext.Panel',
    xtype: 'pie',
    controller: 'pie',

    requires: [
        "Ext.chart.theme.DefaultGradients"
    ],

    title: 'Top vulnerabilities based on CVSS',
    width: 650,

    items: [{
        xtype: 'polar',
        reference: 'chart',
        captions: {
            title: 'Pie Chart',
        },
        theme: 'default-gradients',
        width: '100%',
        height: 500,
        insetPadding: 40,
        innerPadding: 20,
        store: {
            type: 'vulnerabilities'
        },
        legend: {
            docked: 'bottom'
        },
        interactions: ['rotate'],
        series: [{
            type: 'pie',
            angleField: 'cvss',
            label: {
                field: 'id',
                calloutLine: {
                    length: 60,
                    width: 3
                    // specifying 'color' is also possible here
                }
            },
            highlight: true,
            tooltip: {
                trackMouse: true,
                renderer: 'onSeriesTooltipRender'
            }
        }]
    }]
});