Ext.define('VulnerabilityScannerClient.view.scan.Scan', {
    extend: 'Ext.form.Panel',
    xtype: 'scan',
    controller: 'scan-controller',
    title: 'New Scan',

    defaultType: 'textfield',
    scrollable: 'y',

    requires: [
        'VulnerabilityScannerClient.store.Target',
        'VulnerabilityScannerClient.model.Target'
    ],

    buttons: [{
        text: 'Reset',
        handler: 'reset',
        tip: 'Click to empty the fields',
        listeners: {
            render: function(c) {
                Ext.create('Ext.tip.ToolTip', {
                    target: c.getEl(),
                    html: c.tip
                });
            }
        }
    }, {
        text: 'Submit',
        handler: 'submit',
        tip: 'Click to start the scan',
        listeners: {
            render: function(c) {
                Ext.create('Ext.tip.ToolTip', {
                    target: c.getEl(),
                    html: c.tip
                });
            }
        }
    }],

    items: [{
        xtype: 'fieldset',
        margin: '20 0 0',
        title: 'Target to scan',
        defaults: {
            xtype: 'textfield'
        },
        items: [{
            fieldLabel: 'URL',
            name: 'url',
            placeholder: 'http://...',
            width: '100%',
        }, {
            xtype: 'combobox',
            fieldLabel: 'Server/CMS',
            name: 'server',
            valueField: 'server',
            displayField: 'server',
            forceSelection: true,
            queryMode: 'local',
            placeholder: 'Select a server...',
            store: {
                type: 'targets'
            }
        }]
    }]
});